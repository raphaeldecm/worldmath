{% extends "account/base.html" %}

{% load i18n %}
{% load crispy_forms_tags %}

{% block head_title %}{% translate "Signup" %}{% endblock %}

{% block content %}
<div class="main-content pl-sm-3 mt-4 d-flex justify-content-center align-items-center">
  <div class="col-md-5 col-lg-5 col-xl-5 col-12">
    {% include "layouts/alerts.html" %}
    <h1 class="text-h1 text-center">{% trans "Sign Up" %}</h1>
    <form class="login" method="POST" action="{% url 'account_signup' %}">
      {% csrf_token %}
      <div class="mb-3">
        <label for="id_username" class="form-label">{% trans "Nome de usu√°rio:" %}</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-user" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
              <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664z"/>
            </svg>
          </i></span>
          <input type="text" name="username" class="form-control" id="id_username" placeholder="{% trans 'Username' %}">
        </div>
      </div>
      <div class="mb-3">
        <label for="id_email" class="form-label">{% trans "Email:" %}</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-envelope" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
            <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z"/>
          </svg></i></span>
          <input type="email" name="email" class="form-control" id="id_email" placeholder="{% trans 'Email' %}">
        </div>
      </div>
      <div class="mb-3">
        <label for="id_password1" class="form-label">{% trans "Senha:" %}</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-lock" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lock" viewBox="0 0 16 16">
            <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2M5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1"/>
          </svg></i></span>
          <input type="password" name="password1" class="form-control toggle-password" placeholder="{% trans 'Password' %}">
          <button type="button" class="btn btn-outline-secondary toggle-button" aria-label="Mostrar Senha">
            <i class="fas fa-eye" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash-fill" viewBox="0 0 16 16">
              <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588M5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"/>
              <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"/>
            </svg></i>
          </button>
        </div>
      </div>
      <div class="mb-3">
        <label for="id_password2" class="form-label">{% trans "Confimar senha:" %}</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-lock" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lock" viewBox="0 0 16 16">
            <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2M5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1"/>
          </svg></i></span>
          <input type="password" name="password2" class="form-control toggle-password" placeholder="{% trans 'Confirm Password' %}">
          <button type="button" class="btn btn-outline-secondary toggle-button" aria-label="Mostrar Senha">
            <i class="fas fa-eye" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash-fill" viewBox="0 0 16 16">
              <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588M5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"/>
              <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"/>
            </svg></i>
          </button>
        </div>
      </div>
      {% if redirect_field_value %}
      <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
      {% endif %}
      <div class="mb-3">
        <button class="btn btn-primary btn-block" type="submit">{% trans "Sign Up" %}</button>
      </div>
    </form>
    <hr>
  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const toggleButtons = document.querySelectorAll(".toggle-button");
    const passwordInputs = document.querySelectorAll(".toggle-password");
    
    toggleButtons.forEach(function(button, index) {
      togglePassword(button, passwordInputs[index]);
    });

    function togglePassword(button, passwordInput) {
      button.addEventListener("click", function() {
        const type = passwordInput.getAttribute("type") === "password" ? "text" : "password";
        passwordInput.setAttribute("type", type);
        button.innerHTML = type === "password" ? '<i class="fas fa-eye" aria-hidden="true"></i>' : '<i class="fas fa-eye-slash" aria-hidden="true"></i>';
      });
    }
  });
</script>
{% endblock %}
